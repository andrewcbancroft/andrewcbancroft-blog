<!DOCTYPE html>
<html lang="en">

<head>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-33022655-1"></script>
    <script>
            (function () {
                if (window.location.hostname === "localhost") {
                    console.log("Analytics not running on local dev.");
                    return;
                } else {
                    window.dataLayer = window.dataLayer || [];
                    function gtag() { dataLayer.push(arguments); }
                    gtag('js', new Date());

                    gtag('config', 'UA-33022655-1');
                }
            })();
    </script>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6356224024630676",
            enable_page_level_ads: true
        });
    </script>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
    "palette": {
        "popup": {
        "background": "#3e8bc5"
        },
        "button": {
        "background": "#8ec760",
        "text": "#ffffff"
        }
    }
    })});
    </script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="3 Nuances of Swift Extensions" />
<meta property="og:description" content="How often do we take an initial cursory look at some documentation, shake our heads and say, &ldquo;Ok, sure! Got it!&#8221;, and then some time later get to the actual usage of that perceived understanding only to find out, &ldquo;Woah – this is behaving differently than I expected! I wonder if the documentation says anything about this?!&#8221;
A few discussions I&rsquo;ve had recently have prompted me to question what I thought I knew about Swift extensions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.andrewcbancroft.com/2015/04/22/3-nuances-of-swift-extensions/" />
<meta property="article:published_time" content="2015-04-22T17:52:36&#43;00:00"/>
<meta property="article:modified_time" content="2015-04-22T17:52:36&#43;00:00"/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="3 Nuances of Swift Extensions"/>
<meta name="twitter:description" content="How often do we take an initial cursory look at some documentation, shake our heads and say, &ldquo;Ok, sure! Got it!&#8221;, and then some time later get to the actual usage of that perceived understanding only to find out, &ldquo;Woah – this is behaving differently than I expected! I wonder if the documentation says anything about this?!&#8221;
A few discussions I&rsquo;ve had recently have prompted me to question what I thought I knew about Swift extensions."/>
<meta name="generator" content="Hugo 0.55.6" /> 
    
    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "3 Nuances of Swift Extensions",
  "url": "https:\/\/www.andrewcbancroft.com\/2015\/04\/22\/3-nuances-of-swift-extensions\/",
  "wordCount": "1445",
  "datePublished": "2015-04-22T17:52:36Z",
  "dateModified": "2015-04-22T17:52:36Z",
  "author": {
    "@type": "Person",
    "name": "Andrew"
  },
  "keywords": "Swift, Extensions"
}
</script>



    <title>3 Nuances of Swift Extensions</title>

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
        crossorigin="anonymous">

    
    <link href="https://www.andrewcbancroft.com/css/custom.css" rel="stylesheet"> 
    <link href="https://www.andrewcbancroft.com/css/syntax.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Muli:400,500,700" rel="stylesheet">
        
    <link href="" rel="alternate" type="application/rss+xml" title="Andrew Bancroft" /> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

</head>

<body>

    <nav class="navbar navbar-expand-lg fixed-top px-5">
            <a class="navbar-brand" href="https://www.andrewcbancroft.com"><i class="fas fa-home"></i> Andrew Bancroft</a> <span class="navbar-brand">|</span> <a class="navbar-brand" href="https://www.andrewcbancroft.com/index.xml"><i class="fas fa-rss"></i> Feed</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="nav navbar-nav mr-auto mt-2 mt-lg-0"></ul>
                <ul class="navbar-nav">
                        <li class="nav-item">
                                <a class="nav-link" href="https://www.andrewcbancroft.com#pluralsight-courses">Pluralsight Courses</a>
                        </li>

                    <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                Topics
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                                <h6 class="dropdown-header">iOS Development</h6>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#data-persistence">Data Persistence</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#dependency-management">Dependency Management</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#eventkit">Event Kit</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#iap">In-App Purchases</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#parse">Parse</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#patterns-and-practices">Patterns and Practices</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#react-native">React Native</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#swift-how-tos">Swift How-To's</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#swift-language-notes">Swift Language Notes</a>
                                
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#testing">Testing</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#ui-work">User Interface Work</a>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#xcode">Xcode</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#dot-net-development">.Net Development</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="https://www.andrewcbancroft.com#musings">Musings</a>
                            </div>
                        </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            Connect With Me
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="https://github.com/andrewcbancroft">GitHub</a>
                            <a class="dropdown-item" href="https://www.linkedin.com/in/andrewcbancroft/">LinkedIn</a>
                            <a class="dropdown-item" href="https://twitter.com/andrewcbancroft">Twitter</a>
                            <a class="dropdown-item" href="https://www.youtube.com/channel/UCDPV9kMhP-b5EFRI7d812pg">YouTube</a>
                            <a class="dropdown-item" href="https://www.pluralsight.com/authors/andrew-bancroft">Pluralsight Courses</a>
                            <a class="dropdown-item" href="https://dataday.life">www.dataday.life</a>
                        </div>
                    </li>
                </ul>
        </div>
    </nav>

    
    
    
    
    
    
    
    

    
    <div class="container">
        <div class="row">
            <div class="col-sm-12">

                


<article>
  <div class="article">
    <header>
      <h1 class="article-title">3 Nuances of Swift Extensions</h1>
    </header>
    <div class="content">

    <p></p>

    

<p>How often do we take an initial cursory look at some documentation, shake our heads and say, &ldquo;Ok, sure! Got it!&#8221;, and then some time later get to the actual usage of that perceived understanding only to find out, &ldquo;Woah – this is behaving differently than I expected! I wonder if the documentation says anything about this?!&#8221;</p>

<p>A few discussions I&rsquo;ve had recently have prompted me to question what I thought I knew about Swift extensions. I have read documentation about extensions and I <em>thought</em> I understood them pretty thoroughly. However, these conversations, along with some experimentation done on my own revealed a few nuances that I didn&rsquo;t pick up on before.</p>

<p><strong>Update:</strong> Almost immediately after publishing this article, the Swift community chimed in and helped me figure out my fundamental hiccup which prompted the aforementioned experimentation in the first place. I&rsquo;ve written a follow-up article called <a href="http://www.andrewcbancroft.com/2015/04/24/clarifying-swift-access-control-hint-swift-isnt-c-sharp/" title="Clarifying Swift Access Control (Hint:  Swift Isn’t C#)">&ldquo;Clarifying Swift Access Control&#8221;</a>, describing that misunderstanding. I recommend giving that one a read to avoid making the same mistake I did!</p>

<p><a name="3-nuances" class="jump-target"></a></p>

<h3 id="three-nuances-of-extensions">Three nuances of extensions</h3>

<p>In particular, the following three nuances challenged what I thought I knew about Swift extensions:</p>

<ol>
<li>The visibility Swift extensions have into the Type they&rsquo;re extending. Can they see things marked <code>private</code>, for example?</li>
<li>How that visibility is affected by where the extension is defined. If I have the source for a Type that I&rsquo;m writing an extension for, does defining it within that same source file vs defining it in a separate file affect what it can &ldquo;see&#8221;?</li>
<li>The default access modifiers of the extension&rsquo;s &ldquo;members&#8221; and how specifying them or <em>not</em> specifying them affect what an extension exposes as public API for the Type it&rsquo;s extending.</li>
</ol>

<p>Before I begin, suppose that I have a public struct called <code>Person</code>. It has some private properties, <code>name</code>, <code>gender</code>, and <code>age</code>. An enum encapsulates the idea of <code>Gender</code>. The struct looks something like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">struct</span> <span class="nc">Person</span> <span class="p">{</span>
<span class="ln"> 2</span>    <span class="kd">private</span> <span class="kd">var</span> <span class="nv">name</span><span class="p">:</span> <span class="nb">String</span>
<span class="ln"> 3</span>    <span class="kd">private</span> <span class="kd">var</span> <span class="nv">gender</span><span class="p">:</span> <span class="n">Gender</span>
<span class="ln"> 4</span>    <span class="kd">private</span> <span class="kd">var</span> <span class="nv">age</span><span class="p">:</span> <span class="nb">Int</span>
<span class="ln"> 5</span>    
<span class="ln"> 6</span>    <span class="kd">public</span> <span class="kd">init</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">gender</span><span class="p">:</span> <span class="n">Gender</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
<span class="ln"> 7</span>        <span class="kc">self</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="n">name</span>
<span class="ln"> 8</span>        <span class="kc">self</span><span class="p">.</span><span class="n">gender</span> <span class="p">=</span> <span class="n">gender</span>
<span class="ln"> 9</span>        <span class="kc">self</span><span class="p">.</span><span class="n">age</span> <span class="p">=</span> <span class="n">age</span>
<span class="ln">10</span>    <span class="p">}</span>
<span class="ln">11</span>    
<span class="ln">12</span>    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">howOldAreYou</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
<span class="ln">13</span>        <span class="k">return</span> <span class="n">formattedAge</span><span class="p">()</span>
<span class="ln">14</span>    <span class="p">}</span>
<span class="ln">15</span>    
<span class="ln">16</span>    <span class="c1">// private func, simply to show extension visibility traits in the analysis below...</span>
<span class="ln">17</span>    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">formattedAge</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
<span class="ln">18</span>        <span class="k">switch</span> <span class="kc">self</span><span class="p">.</span><span class="n">gender</span> <span class="p">{</span>
<span class="ln">19</span>        <span class="k">case</span> <span class="p">.</span><span class="n">Male</span><span class="p">:</span>
<span class="ln">20</span>            <span class="k">return</span> <span class="s">&#34;I&#39;m </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">age</span><span class="si">)</span><span class="s">.&#34;</span>
<span class="ln">21</span>        <span class="k">case</span> <span class="p">.</span><span class="n">Female</span><span class="p">:</span>
<span class="ln">22</span>            <span class="k">return</span> <span class="s">&#34;Not telling.&#34;</span>
<span class="ln">23</span>        <span class="p">}</span>
<span class="ln">24</span>    <span class="p">}</span>
<span class="ln">25</span>    
<span class="ln">26</span>    <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Gender</span> <span class="p">{</span>
<span class="ln">27</span>        <span class="k">case</span> <span class="n">Male</span>
<span class="ln">28</span>        <span class="k">case</span> <span class="n">Female</span>
<span class="ln">29</span>    <span class="p">}</span>
<span class="ln">30</span><span class="p">}</span></code></pre></div>
<p>Now, suppose that I wanted to extend <code>Person</code> and inspect the three nuances about the extension&rsquo;s capabilities and behaviors that I introduced at the beginning of this article&#8230;</p>

<p><a name="extension-visibility" class="jump-target"></a></p>

<h3 id="extensions-and-visibility-into-extended-type">Extensions and visibility into extended Type</h3>

<p>When I introduced that first nuance about visibility into the extended Type, I asked the question, &ldquo;Can they see things marked <code>private</code>?&#8221; The answer surprised me at first: <em>Yes</em>&#8230;they <em>can</em>.</p>

<p>However, here&rsquo;s where the second nuance comes in: It absolutely does matter <em>where</em> the extension is defined.</p>

<p><a name="defined-same-file" class="jump-target"></a></p>

<h4 id="defined-within-same-file">Defined within same file</h4>

<p>Extensions defined within the same file as the Type they&rsquo;re extending have access to <code>private</code> members of that Type.</p>

<p>For example, defining an extension to <code>Person</code> <em>within</em> Person.swift allows the extension to access <code>private</code> properties and functions! Who knew?!</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="ln">1</span><span class="kd">extension</span> <span class="nc">Person</span> <span class="p">{</span>
<span class="ln">2</span>    <span class="kd">func</span> <span class="nf">getAge</span><span class="p">()</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="nb">Int</span> <span class="p">{</span>
<span class="ln">3</span>        <span class="k">return</span> <span class="n">age</span> <span class="c1">// compiles, even though age is --private--</span>
<span class="ln">4</span>    <span class="p">}</span>
<span class="ln">5</span>    
<span class="ln">6</span>    <span class="kd">func</span> <span class="nf">getFormattedAge</span><span class="p">()</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="nb">String</span> <span class="p">{</span>
<span class="ln">7</span>        <span class="k">return</span> <span class="n">formattedAge</span><span class="p">()</span> <span class="c1">// compiles, even though formattedAge is --private--</span>
<span class="ln">8</span>    <span class="p">}</span>
<span class="ln">9</span><span class="p">}</span></code></pre></div>
<p>&ldquo;What?? Why?&#8221;, I thought to myself&#8230;</p>

<p>My reasoning as to why extensions defined within the same file behave this way is because when it comes down to it, I could have just written the extension&rsquo;s implementation as part of the Type itself and it would have had the same effect.</p>

<p>I&rsquo;m <em>in the source file</em> of the Type I&rsquo;m &ldquo;extending&#8221;. So whether I write the additional functionality as an extension for the Type, or just define what would have been in the extension <em>inside the Type, itself</em>, the net effect is the same.</p>

<p>Therefore, the compiler essentially says, &ldquo;I see this extension being defined, but there&rsquo;s really no point. It&rsquo;s in the same file that the Type is defined in&#8230; so the developer <em>could have</em> just written all this code within the Type itself&#8230; so I&rsquo;ll let him/her refer to <code>private</code> code blocks.&#8221;</p>

<p><strong>Update:</strong> My reasoning above reveals that I truly didn&rsquo;t have an understanding of Swift access control. I recommend giving my followup article titled <a href="http://www.andrewcbancroft.com/2015/04/24/clarifying-swift-access-control-hint-swift-isnt-c-sharp/" title="Clarifying Swift Access Control (Hint:  Swift Isn’t C#)">&ldquo;Clarifying Swift Access Control&#8221;</a> a read for more details!</p>

<p><a name="defined-separate-file" class="jump-target"></a></p>

<h4 id="defined-in-a-separate-file">Defined in a separate file</h4>

<p>Moving the extension definition into a separate file, however, causes the extension to lose that visibility into the Type it&rsquo;s extending.</p>

<p>Following the inverse of my previous reasoning about <code>private</code> visibility when the extension is defined within the same file, this behavior actually makes sense to me.</p>

<p>Most of the time, you&rsquo;d be writing an extension for Types that you <em>don&rsquo;t</em> have the source to. In that scenario, extensions would have the same visibility that any client of the Type&rsquo;s exposed API would have, namely, the things marked <code>public</code>.</p>

<p><a href="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/PersonExtensions_swift.png"><img src="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/PersonExtensions_swift.png" alt="PersonExtensions.swift" width="506" height="159" class="alignnone size-full wp-image-11731" srcset="https://www.andrewcbancroft.com/wp-content/uploads/2015/04/PersonExtensions_swift.png 506w, https://www.andrewcbancroft.com/wp-content/uploads/2015/04/PersonExtensions_swift-300x94.png 300w" sizes="(max-width: 506px) 100vw, 506px" /></a></p>

<p><a name="default-acces-control" class="jump-target"></a></p>

<h3 id="default-extension-access-control">Default extension access control</h3>

<p>The final nuance also yielded some semi-surprising results for me. <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/AccessControl.html#//apple_ref/doc/uid/TP40014097-CH41-ID25">Apple&rsquo;s documentation</a> says it, but until I experimented and saw it in action, I didn&rsquo;t catch the nuance around the default access control modifiers applied to extensions.</p>

<p><a name="no-explicit-access-control" class="jump-target"></a></p>

<h4 id="default-access-when-no-explicit-access-modifiers-specified">Default access when no explicit access modifiers specified</h4>

<p>In short, when you declare an extension but specify no explicit access modifiers (ie, you just use the default), the extension&rsquo;s default access level depends on the access level of the Type it&rsquo;s extending.</p>

<ul>
<li>If the Type is <code>public</code> or <code>internal</code>, the extension&rsquo;s implementation &ldquo;members&#8221; will be <code>internal</code> by default. The &ldquo;surprise&#8221; for me I think is that extensions for <code>public</code> Types have <code>internal</code> members by default, unless you specify otherwise.</li>
<li>If the Type is <code>private</code>, the extension&rsquo;s implementation &ldquo;members&#8221; will be <code>private</code> by default.</li>
</ul>

<p>Here&rsquo;s what the extension looks like if we analyze it from the perspective of using no explicitly declared access modifiers (note that to gain access to private properties and functions, I&rsquo;m declaring the extension within Person.swift):</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">struct</span> <span class="nc">Person</span> <span class="p">{</span>
<span class="ln"> 2</span>    <span class="c1">// ...</span>
<span class="ln"> 3</span>    
<span class="ln"> 4</span>    <span class="c1">// ...</span>
<span class="ln"> 5</span><span class="p">}</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span><span class="kd">extension</span> <span class="nc">Person</span> <span class="p">{</span>
<span class="ln"> 8</span>    <span class="kd">func</span> <span class="nf">getAge</span><span class="p">()</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="nb">Int</span> <span class="p">{</span>
<span class="ln"> 9</span>        <span class="k">return</span> <span class="n">age</span>
<span class="ln">10</span>    <span class="p">}</span>
<span class="ln">11</span>    
<span class="ln">12</span>    <span class="kd">func</span> <span class="nf">getFormattedAge</span><span class="p">()</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="nb">String</span> <span class="p">{</span>
<span class="ln">13</span>        <span class="k">return</span> <span class="n">formattedAge</span><span class="p">()</span>
<span class="ln">14</span>    <span class="p">}</span>
<span class="ln">15</span><span class="p">}</span></code></pre></div>
<p>Using the default access modifiers as shown in the code snippet above exposes access to the extension&rsquo;s new API to instances within the same module. However, it does <em>not</em> expose additional public API for the Type it&rsquo;s extending to a client of that Type that&rsquo;s in another <em>module</em> (for example, the unit test target, which is another Swift module).</p>

<p><strong>Same Module</strong><br />
<a href="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/SameModule.png"><img src="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/SameModule.png" alt="Extended API within the same module" width="505" height="264" class="alignnone size-full wp-image-11733" srcset="https://www.andrewcbancroft.com/wp-content/uploads/2015/04/SameModule.png 505w, https://www.andrewcbancroft.com/wp-content/uploads/2015/04/SameModule-300x157.png 300w" sizes="(max-width: 505px) 100vw, 505px" /></a></p>

<p><strong>Different Module (test target)</strong><br />
<a href="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/DifferentModule.png"><img src="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/DifferentModule.png" alt="Extended API in a different module" width="507" height="171" class="alignnone size-full wp-image-11734" srcset="https://www.andrewcbancroft.com/wp-content/uploads/2015/04/DifferentModule.png 507w, https://www.andrewcbancroft.com/wp-content/uploads/2015/04/DifferentModule-300x101.png 300w" sizes="(max-width: 507px) 100vw, 507px" /></a></p>

<p>For some reason, I had it in my head that if a Type that I&rsquo;m extending is <code>public</code>, the extension&rsquo;s members would default to <code>public</code>. I don&rsquo;t know <em>why</em> I thought that, but thankfully my experimentation cleared up!</p>

<p><a name="default-declaration-public-implementation" class="jump-target"></a></p>

<h4 id="default-access-when-using-default-extension-declaration-but-specify-public-for-implementation">Default access when using default extension declaration, but specify public for implementation</h4>

<p>Adding <code>public</code> access control modifiers to the extension implementation&rsquo;s members makes those members visible everywhere (that is, both within the same module, and within the test target).</p>

<p>The location of the extension&rsquo;s declaration, be it within the same source file as the Type it&rsquo;s extending, or in a separate source file, does not matter in terms of what the extension exposes when adding <code>public</code> members&#8230; But only extensions declared within the same source file as the Type it&rsquo;s extending can see <code>private</code> members of that Type, as we discovered previously.</p>

<p><strong>Extensions declared in same <em>and</em> separate source files</strong><br />
<a href="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_extension_members.png"><img src="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_extension_members-1024x645.png" alt="Public extension members defined within the same source file, and in separate source files..." width="1024" height="645" class="alignnone size-large wp-image-11752" srcset="https://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_extension_members-1024x645.png 1024w, https://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_extension_members-300x189.png 300w, https://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_extension_members.png 1061w" sizes="(max-width: 1024px) 100vw, 1024px" /></a></p>

<p><strong>Public extension members visible in different module (test target)</strong><br />
<a href="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_member_visibility.png"><img src="http://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_member_visibility.png" alt="Regardless of where the extension is declared, all public members are visible to  other modules (such as the test target)." width="533" height="353" class="alignnone size-full wp-image-11753" srcset="https://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_member_visibility.png 533w, https://www.andrewcbancroft.com/wp-content/uploads/2015/04/public_member_visibility-300x199.png 300w" sizes="(max-width: 533px) 100vw, 533px" /></a></p>

<p>But notice that on the line where I&rsquo;ve written <code>extension Person { ... }</code> that I haven&rsquo;t specified an access control modifier for the extension, itself. I&rsquo;ve only added <code>public</code> to its <em>members</em>. Even still, the new functions are visible to the test target which is a different module.</p>

<p>In other words, there&rsquo;s no need to write <code>public extension Person { ... }</code>. Since <code>Person</code> is <code>public</code>, the extension just uses the Type&rsquo;s access level for its own declaration.</p>

<h3 id="wrapping-up">Wrapping up</h3>

<p>The three nuances about Swift extensions that were analyzed here were &ldquo;surprising&#8221; enough to me to warrant some experimentation. My hope is that the analysis that was done will help clear up these subtleties for others who are struggling with understanding how Swift extensions behave!</p>

<p><a name="related" class="jump-target"></a></p>

<div class="resources">
  <div class="resources-header">
    You might also enjoy&#8230;
  </div>
  

<p><ul class="resources-content">
    <li>
      <i class="fa fa-angle-right"></i> <a href="http://www.andrewcbancroft.com/2014/11/03/the-5-ws-of-swift-extensions/" title="The 5 W’s of Swift Extensions">The 5 W’s of Swift Extensions</a>
    </li>
    <li>
      <i class="fa fa-angle-right"></i> <a href="http://www.andrewcbancroft.com/2014/12/02/send-a-type-to-obedience-school-using-swift-extensions-for-additional-protocol-conformance/" title="Send a Type to Obedience School – Using Swift Extensions for Additional Protocol Conformance">Send a Type to Obedience School – Using Swift Extensions for Additional Protocol Conformance</a>
    </li>
  </ul>
</div></p>

<p><a name="share" class="jump-target"></a></p>


    <aside>
      
      
      <div class="resources">
        <div class="resources-header">
            You might also enjoy...
        </div>
        
        <ul class="resources-content">
            
            <li><i class="fa fa-angle-right"></i> <a href="https://www.andrewcbancroft.com/2014/12/02/send-a-type-to-obedience-school-using-swift-extensions-for-additional-protocol-conformance/">Send a Type to Obedience School – Using Swift Extensions for Additional Protocol Conformance</a></li>
            
            <li><i class="fa fa-angle-right"></i> <a href="https://www.andrewcbancroft.com/2015/04/15/testability-tip-for-swift-developers-public-over-private/">Testability Tip for Swift Developers – Public Over Private</a></li>
            
            <li><i class="fa fa-angle-right"></i> <a href="https://www.andrewcbancroft.com/2015/04/08/how-delegation-works-a-swift-developer-guide/">How Delegation Works – A Swift Developer’s Guide</a></li>
            
            <li><i class="fa fa-angle-right"></i> <a href="https://www.andrewcbancroft.com/2015/04/01/enums-instead-of-booleans-an-example-implementation/">Enums Instead of Booleans – An Example Implementation</a></li>
            
            <li><i class="fa fa-angle-right"></i> <a href="https://www.andrewcbancroft.com/2015/03/27/announcing-the-birth-of/">Announcing the Birth of……</a></li>
            
        <ul>
      
    </aside>

    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "andrewcbancroft" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>



            </div>

        </div>
    </div>

    

    <footer class="footer text-center">
        <div class="container">
            <span class="text-muted">This project contains 159 pages and is available on <a href="https://github.com/andrewcbancroft/andrewcbancroft-blog">GitHub</a>. Copyright &copy; Andrew Bancroft, <time datetime="2019">2019</time>.</span>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"></script>

</body>

</html>